#summary Using a small sample data set the main functionality of PoPoolation2 is demonstrated


<wiki:toc max_depth="3" />

=1. Introduction=
Allim: Allelic imbalance meter offers an integrated and user-friendly solution for measuring allele specific gene expression within species.
We have developed Allim: a user-friendly pipeline to estimate allelic imbalance in F1 hybrids. Since mapping bias is the largest problem for reliable estimates of allele specific gene expression using RNA-Seq, Allim combines two different measures to account for mapping biases. First, Allim generates a polymorphism aware reference genome that accounts for the sequence variation between the alleles. Second, Allim includes a sequence specific simulation tool to estimate the remaining mapping bias. This estimated mapping bias is then incorporated in the statistical tests for allelic imbalance.
The pipeline requires whole transcript RNA sequencing (RNA-seq) reads from both parents and the F1 hybrid provided in separate files. Allim was tested on Illumina paired-end RNA-seq reads but it can also handle FASTQ files from other NGS sequencing platforms. The provided parental RNA-seq libraries can be from homozygous parents.
Allim has five modules that can be run by a single command, without much hassle. User can edit AllimOption.txt file once and run the whole pipeline.

Five Modules of Allim:
  * Finding fixed SNP
  * Computer simulation of RNA-Seq reads
  * Estimating Allele Specific Expression with experimental data
  * Estimating Allele Specific Expression with simulated data
  * Statistical test of significant allelic imbalance

The source code and the user manual of Allim are available from http://code.google.com/p/allim/


=2. Requirements=

To use Allim pipeline, user needs to meet these requirements.
  * Linux or Macintosh OSX system or any other Unix 64 bit system with at least 4 GB of RAM and 2 CPU (processors)
  * Python 2.7.3 [http://www.python.org/download/]
  * Biopython 1.59 or higher [http://biopython.org/wiki/Download]
  * PICARD (BuildBamIndex.jar, MergeSamFiles.jar, SortSam.jar) [http://sourceforge.net/projects/picard/files/picard-tools/]
  * SAMTOOLS [http://sourceforge.net/projects/samtools/files/samtools/]
  * BedTools (bamToBed, intersectBed, sortBed) [http://code.google.com/p/bedtools/]
  * GSNAP [http://research-pub.gene.com/gmap/]
  * R version 2.15.0 [http://cran.r-project.org/]
  * NumPy [http://numpy.scipy.org/]
  * RPy 2.2.2 [http://rpy.sourceforge.net/rpy2.html]
  * R package car version 2.0-12 [http://cran.r-project.org/web/packages/car/index.html]
  * R package multcomp version 1.2-12 [http://cran.r-project.org/web/packages/multcomp/index.html]
  * Bioconductor package edgeR [http://www.bioconductor.org/packages/2.10/bioc/html/edgeR.html]
  * Bioconductor package limma [http://www.bioconductor.org/packages/release/bioc/html/limma.html]

   Note: To install R packages listed above 11-14, R >=2.15.0 should be installed.
==2.1 Operating system==
Allim package is designed to work with 64-bit Unix operating system with at least 4 GB or RAM and 2 CPUs (processors).

==2.2 Python==
Allim is developed on Python version 2.7.3. Python 2.7.3 for your operating system could be obtained from http://www.python.org/download/. After download follow the instruction given on above web page to complete the python installation and configuration.

==2.3 Install Biopython==
Allim requires bio python for efficient fasta sequence reading writing and other sequence manipulations.
Once python is installed then bio python can be obtained and install with following steps:

*Step1:* Download biopython source code from http://biopython.org/DIST/biopython-1.60.tar.gz

*Step2:* Uncompress the downloaded file with following command:
	
{{{
tar –zxvf biopython-1.60.tar.gz
}}}

This command will return the folder/directory numpy-1.6.0

*Step3:* go in this uncompressed folder with following command:

{{{
cd biopython-1.60
}}}

*Step4:* To install this python package run these two commands:

{{{
python setup.py build
python setup.py install
}}}



==2.4 Install PICARD==
Picard comprises Java-based command-line utilities that manipulate SAM/BAM files. It is a collection of many JAVA jar files, which could be downloaded and used directly without any installation.


*Step1:* Download latest version of PICARD from http://sourceforge.net/projects/picard/files/picard-tools/1.75/

*Step2:* uncompress the downloaded file with following command:

{{{
unzip picard-tools-1.75.zip
}}}

Allim pipeline used 3 jar files: 1) BuildBamIndex.jar, 2) MergeSamFiles.jar, 3) SortSam.jar, give full path of these three jar files in AllimOptions run file to run Allim pipeline.

==2.5 Install SAMTOOLS==
SAM Tools provide various utilities for manipulating alignments in the SAM format, including sorting, merging, indexing and generating alignments in a per-position format.


*Step1:* Download latest SAMTOOLS source code from http://sourceforge.net/projects/samtools/files/samtools/


*Step2:* Uncompress the downloaded file samtools-0.1.18.tar.bz2 with following command:

{{{
tar -xvjf samtools-0.1.18.tar.bz2
}}}

This command will return the folder/directory samtools-0.1.18

*Step3:* go in this uncompressed folder samtools-0.1.18 with following command:
	
{{{
cd samtools-0.1.18
}}}


*Step4:* To make samtools executable run make command:
	
{{{
make
}}}

After make command an executable called samtools will be created, give full path of samtools executable in AllimOptions run file to run Allim pipeline.



==2.6 Install bedtools==

*Step1:* Download bedTools from http://bedtools.googlecode.com/files/BEDTools.v2.16.2.tar.gz

*Step2:* Uncompress the downloaded file “BEDTools.v2.16.2.tar.gz” with following command:

{{{
tar -xzvf BEDTools.v2.16.2.tar.gz
}}}

This command will return the folder/directory BEDTools-Version-2.16.2


*Step3:* go in this uncompressed folder BEDTools-Version-2.16.2 with following command:
	
{{{
cd BEDTools-Version-2.16.2
}}}


*Step4:* To make samtools executable run make all command:
	
{{{
make all
}}}

After “make all” command; BEDTools-Version-2.16.2/bin sub-folder/sub-directory will be created which contains all betTools executables.
Allim pipeline used 3 executables: 1) intersectBed, 2) sortBed, 3) bamToBed, give full path of these three executables in AllimOptions run file to run Allim pipeline.



==2.7 Install GSNAP==


*Step1:* Download GSNAP source code from http://research-pub.gene.com/gmap/src/gmap-gsnap-2012-07-20.tar.gz

*Step2:* Uncompress the downloaded file “gmap-gsnap-2012-07-20.tar.gz” with following command:

{{{
tar -xzvf gmap-gsnap-2012-07-20.tar.gz
}}}


*Step3:* go in this uncompressed folder “gmap-2012-07-20” with following command:
	
{{{
cd gmap-2012-07-20
}}}


*Step4:* To install this python package run these four commands:

{{{
./configure
make
make check   (optional)
make install
}}}

These above four commands will build gsnap and other executables in “/usr/bin”

*Step5:* To check gsnap installations run this command:
	
{{{
gsnap –help
}}}

This command will return detail help manual about parameters.
Note: For detail information visit GSNAP README file [http://research-pub.gene.com/gmap/src/README GSNAP README]



==2.8 Install R==
Operating system specific R source code can be obtained from http://cran.r-project.org/ and follow the instruction to install R.



==2.9 Install NumPy==
NumPy is the fundamental package for scientific computing with Python. It is used for introducing sequencing error while simulating RNA-Seq reads in Allim pipeline. In order to install NumPy on any Unix system following steps required:

*Step1:* Download NumPy package source code from http://sourceforge.net/projects/numpy/files/NumPy/1.6.0/


*Step2:* Uncompress the downloaded file with following command
	
{{{
tar –zxvf numpy-1.6.0.tar.gz
}}}

This command will return the folder/directory numpy-1.6.0

*Step3:* go in this uncompressed folder with following command
	
{{{
cd numpy-1.6.0
}}}


*Step4:* To install this python package run these two commands:
	
{{{
python setup.py build
python setup.py install
}}}




==2.10 Install RPy2==
This is a python class designed to do R statistics programming in python. In order to install it on any Unix system following steps required:

*Step1:* Download RPy2 package source code from http://sourceforge.net/projects/rpy/files/rpy2/2.2.x/

*Step2:* Uncompress the downloaded file with following command
	
{{{
tar –zxvf rpy2-2.2.2.tar.gz
}}}

This command will return the folder/directory rpy2-2.2.2

*Step3:* go in this uncompressed folder with following command
	
{{{
cd rpy2-2.2.2
}}}


*Step4:* To install this python package run these two commands:
	
{{{
python setup.py build
python setup.py install
}}}



==2.11 Install R package car==

*Step1:* Download R package car source code from http://cran.r-project.org/src/contrib/car_2.0-12.tar.gz

*Step2:* Open terminal and run following command to install:

{{{
R CMD INSTALL car_2.0-12.tar.gz
}}}



==2.12 Install R package multcop==

*Step1:* Download R package multcop source code from http://cran.r-project.org/src/contrib/multcomp_1.2-12.tar.gz

*Step2:* Open terminal and run following command to install:

{{{
R CMD INSTALL multcomp_1.2-12.tar.gz
}}}



==2.13 Install R package edgeR==

*Step1:* Download R package edgeR source code from www.bioconductor.org/packages/2.3/bioc/src/contrib/edgeR_1.0.4.tar.gz

*Step2:* Open terminal and run following command to install:

{{{
R CMD INSTALL edgeR_1.0.4.tar.gz
}}}



==2.14 Install R package limma==

*Step1:* Download R package limma source code from http://phase.hpcc.jp/mirrors/stat/R/CRAN/src/contrib/limma_2.0.2.tar.gz

*Step2:* Open terminal and run following command to install:

{{{
R CMD INSTALL limma_2.0.2.tar.gz
}}}